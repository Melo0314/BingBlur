# BingBlur
当前版本:v0.3.0.5 （2019.4.26）<br /> 
下载地址:项目主页BingBlurVxxx.zip是编译好的安装包。 <br />
## 注意事项
* v0.3.0.5的Win10用户请重新安装。重新安装需先卸载老版本。
* v0.3.0.4需重新安装。请先运行卸载再运行新版本的 安装.bat。
* v0.3.0.2及以前版本更新到新版本的用户，请删除config.ini重新进行配置，并卸载旧版本重新运行 安装.bat。 
* 配置config.ini时，请关闭记事本的自动换行功能。
* 开机/无网络桌面壁纸异常(黑屏)的用户，请重新运行 安装.bat。
## 使用方法
* 解压BingBlur到非中文目录，如D:\ <br /> 
* 运行 安装.bat，后运行BingBlur.exe，日后每次开启自启动。 <br /> 
* 需要卸载时，运行 卸载.bat ，删除BingBlur目录即可。 <br /> 
## 功能简介
* 每日自动更换Bing壁纸。壁纸区为CN。 <br /> 
* 可根据config.ini配置进行局部模糊。 <br /> 
* Windows7系统下默认开机登录界面壁纸替换，壁纸为前一天的壁纸进行半径为80的高斯模糊。 <br /> 
## Config.ini配置简介
__用记事本编辑时，请关闭自动换行，否则出现无法读取配置的BUG。__ <br /> 
### LoginPic ###
__是否启用登陆背景。__
* Statue 为1时表示开启开机登录背景替换。 <br /> 
### RectProcess ###
__矩形区域模糊，需要输入对角坐标(x,y)和模糊深度。__
* BlurNum 为进行模糊的区域，默认为1，即任务栏区域。0为关闭模糊功能。 <br /> 
* BlurZoom01,02,03,04,05 分别表示 模糊区域1 的x1,x2,y1,y2（x1x2为横向起始和终止坐标，并非宽度，y轴依然如此），模糊程度（任务栏默认模糊度40）。 <br /> 
* BlurNum为 1 时，BlurZoom1x 设置有效BlurZoom2x 设置无效，以此类推。 <br /> 
### MaskProcess ###
__掩码(颜色识别)模糊，根据所给遮罩图片进行自定义形状的局部模糊。__
* BlurColor 取值-1,0,1，为-1时不进行掩码（颜色识别）模糊，为0时黑色部分进行模糊，为1时，白色部分进行模糊。
* MaskPic 为遮罩图片路径，如取主程序同目录的mask.png，则填写\mask.png，反斜杠不可省略。
* Threshold 为阈值，从0~255取值，意为颜色识别的严格程度。为1时候只对纯黑色进行模糊,为254时候只对纯白色进行模糊（阈值过大可能产生边缘毛刺，推荐230）。
* BlurLevel 为模糊程度，默认120.
### 关于颜色识别模糊功能的赘述 ###
可以将桌面设置为纯白色，将任务栏隐藏，打开所有要进行背景模糊的小插件，按键盘上的PRTSC截图/QQ全屏截图，打开画图，粘贴，另存为到BingBlur目录下，命名为mask.png(命名随意但只能是英文)。后在config.ini中配置BlurColor为1，其他默认即可。双击主程序刷新壁纸。
<br /> 

# 更新日志 #
## v0.3.0.5
2019.4.26<br />
修复了某些Win10版本下无法自启动的问题。<br />
## v0.3.0.4
2018.11.09<br />
修复开机无网络状态下有概率不能正常显示上次缓存壁纸的BUG。<br />
更新安装脚本和卸载脚本以适配Windows10系统。旧版本用户升级到新版本的时候需运行旧版卸载.bat再运行新版的安装.bat。<br />
## v0.3.0.3
2018.3.10<br />
修复无网络状态下桌面黑屏的BUG。<br />
修复零点前后程序运行异常的BUG。<br />
当日壁纸缓存区更换为MyPicture文件夹。<br />
## v0.3.0.2
2018.2.12<br />
修正Win7系统下登录界面背景无法显示的BUG。（非v0.3.0.1版本无此BUG）<br />
## v0.3.0.1
2018.2.7<br />
增加掩码（颜色识别）模糊功能，使用方法在Config配置解析中查看。<br />
更改Config配置文件结构，需重新配置Config.ini。<br />
代码优化，减少内存占用。<br />
## v0.2.1.3
2018.2.4<br />
更换壁纸获取地址为Bing的日本服务器(为解决政策or速度所导致的质量or效率问题。)。<br />
## v0.2.1.2
2018.01.26<br />
自适应多种分辨率屏幕，以比例放大缩小，中心裁剪的方式。<br />
取消默认配置中的底部任务栏模糊，修改为无模糊区域，即壁纸与bing图片完全一致。<br />
修复了无模糊区域时无法设置壁纸的BUG。<br />
## v0.1.1.3
2018.01.03<br />
修复获取XML配置文件可能获取到历史缓存的BUG。<br />
更改无网络状态下尝试获取XML文件的间隔为3秒，以大幅降低无网络状态下CPU的占用。<br />
## v0.1.1.2
2017.12.04<br />
修复部分Win7设备无法清除缓存的BUG。<br />
<br />
## v0.1.1.1
2017.11.20<br /> 
将win7下登录界面背景进行模糊度为80的高斯模糊。<br /> 
增加自动清除缓存功能，想保存今日壁纸可右击桌面点击 保存壁纸到桌面 ，即可保存今日壁纸。 <br /> 
清晰化安装.bat的命名。 <br /> 
 <br /> 
## v0.1.1.0 
2017.11.19 <br /> 
修正无网络状态下获取jpg错误导致opencv内存异常的BUG。 <br /> 
修正win7系统下登录界面背景超过250kb从而无法正常显示的BUG。 <br /> 
修正win7系统下登录界面背景首次开启失败的BUG。 <br /> 
 <br /> 
## v0.1.0.9 
2017.11.14 <br /> 
更换openCV为高斯模糊的模块，减少开机CPU占用，加快缓存生成的速度。无法支持32位系统。 <br /> 
 <br /> 
## v0.1.0.8 
2017.11.09 <br /> 
更新部分WindowsAPI为新版，再无法支持windowsXP。 <br /> 
 <br />  <br /> 
# 源码说明
使用VS2017编写，使用了openCV2.4.13.4和TinyXML开源库，遵循GPL标准。 <br /> 
未使用MFC,MT静态编译。 <br /> 
By Melo@<a href="http://melo.site/">Melo.Site</a> <br /> 
